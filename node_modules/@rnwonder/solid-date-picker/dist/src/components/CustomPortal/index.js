import { createComponent as h, Portal as k, memo as O, use as v, insert as w, effect as y, className as p, style as I, template as S } from "solid-js/web";
import { createEffect as x, Show as E } from "solid-js";
import { utils as R } from "../../utils/index.js";
import { clickOutsideSJ as W } from "../../utils/portal.js";
import { cn as B } from "../../utils/class.js";
var b = S("<div><div>");
function P(e, t) {
  W(e, t);
}
const q = (e) => (x(() => {
  var t, n;
  (t = e.clickOutsideRef) != null && t.call(e) && R().clickOutside((n = e.clickOutsideRef) == null ? void 0 : n.call(e), (r) => {
    e.isShown && (e.ignoreClickOutside || (e.onClickOutsideRef ? e.onClickOutsideRef(r) : e.setIsShown(!1)));
  });
}), h(E, { get when() {
  return e.isShown;
}, keyed: !0, get children() {
  return h(k, { get mount() {
    var t;
    return O(() => !!(e != null && e.referenceId))() ? document.getElementById(e.referenceId) : ((t = e == null ? void 0 : e.reference) == null ? void 0 : t.call(e)) || document.getElementById("modal");
  }, get children() {
    var t = b(), n = t.firstChild;
    return v(P, t, () => (r) => {
      e.ignoreClickOutside || (e.onClickOutside ? e.onClickOutside(r) : (e.setIsShown(!1), e.onClose && e.onClose()));
    }), w(n, () => e.children), y((r) => {
      var c, d, l, a, f, u, m;
      var i = e.class, g = { ...e.useRefWidth && (((c = e.reference) == null ? void 0 : c.call(e)) || e.referenceId && document.getElementById(e.referenceId)) && { width: (d = e.reference) != null && d.call(e) ? ((a = (l = e.reference) == null ? void 0 : l.call(e)) == null ? void 0 : a.clientWidth) + "px" : document.getElementById(e.referenceId || "") ? ((f = document.getElementById(e.referenceId || "")) == null ? void 0 : f.clientWidth) + "px" : "" }, ...e.style }, o = B({ "\n                    rn-absolute\n                    rn-z-10\n                    rn-flex\n                    rn-w-full\n                    rn-flex-col\n                    rn-bg-transparent\n                ": !e.hideDefaultStyle }, e.innerWrapperClass), C = { ...e.useRefWidth && { width: ((m = (u = e.reference) == null ? void 0 : u.call(e)) == null ? void 0 : m.clientWidth) + "px" } };
      return i !== r.e && p(t, r.e = i), r.t = I(t, g, r.t), o !== r.a && p(n, r.a = o), r.o = I(n, C, r.o), r;
    }, { e: void 0, t: void 0, a: void 0, o: void 0 }), t;
  } });
} }));
export {
  q as CustomPortal
};
