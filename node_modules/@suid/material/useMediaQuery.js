import { useTheme } from "./styles";
import { createSignal, onCleanup } from "solid-js";
const mediaPrefix = "@media ";
export default function useMediaQuery(queryInput) {
    let queryInputString = typeof queryInput === "function" ? queryInput(useTheme()) : queryInput;
    if (queryInputString.startsWith(mediaPrefix))
        queryInputString = queryInputString.slice(mediaPrefix.length);
    const query = window.matchMedia(queryInputString);
    const [matches, setMatches] = createSignal(query.matches);
    const listener = (e) => setMatches(e.matches);
    if (query.addEventListener) {
        query.addEventListener("change", listener);
    }
    else {
        // [support] Safari < 14
        query.addListener(listener);
    }
    onCleanup(() => query.removeEventListener("change", listener));
    return matches;
}
